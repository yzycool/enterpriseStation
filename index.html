<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport"
    content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no" />
  <title>Document</title>
  <!-- <link rel="stylesheet" href="./tailwind.css" /> -->
  <link rel="stylesheet" href="./style.css" />
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body>
  <div class="w-full h-full bg-white ">
    <nav class="flex justify-between px-8 py-4 bg-black md:bg-[#252429] text-white w-full">
      <div class="flex space-x-4">
        <a class="text-[20px] font-semibold " href="#"> 企业站 </a>
      </div>
      <div class="hidden md:block md:flex">
        <div class="text-[14px]  font-semibold tabs mr-[88px]" onclick="openTab(event, 'Tab1', 0)">
          <div class="cursor-pointer tab active">首页</div>
        </div>
        <div class="text-[14px] font-semibold tabs mr-[88px]" onclick="openTab(event, 'Tab2', 1)">
          <div class="cursor-pointer tab">新闻列表页</div>
        </div>
        <div class="text-[14px] font-semibold tabs mr-[88px]" onclick="openTab(event, 'Tab3', 2)">
          <div class="cursor-pointer tab">关于我们</div>
        </div>
      </div>

      <div id="openNavBtn" class="w-[20px] h-[15px]  md:hidden">
        <img src="./img/icon/01.jpg" alt="">
      </div>
    </nav>
    <main class=" max-w-[960px] min-h-[50vh] mx-auto">
      <div id="Tab1" class="hidden tabContent">
        <!-- 轮播图 -->
        <div class="relative overflow-hidden slideshow-container">
          <div class="relative flex transition-all duration-500 slides">
            <div class="slide w-full h-full shrink-0 basis-full bg-[#ccc] ">
              <img loading="lazy" class="w-full" src="https://loremflickr.com/500/210?lock=1"
                srcset="https://loremflickr.com/500/210?lock=1 500w, https://loremflickr.com/900/378?lock=1 900w, https://loremflickr.com/1920/800?lock=1 1920w"
                sizes="(max-width: 500px) 100vw, (max-width: 900px) 100vw, 100vw" alt="Slide 1">
            </div>
            <div class="slide w-full h-full shrink-0 basis-full bg-[#ccc] ">
              <img class="w-full" src="https://loremflickr.com/500/210?lock=5"
                srcset="https://loremflickr.com/500/210?lock=5 500w, https://loremflickr.com/900/378?lock=5 900w, https://loremflickr.com/1920/800?lock=5 1920w"
                sizes="(max-width: 500px) 100vw, (max-width: 900px) 100vw, 100vw" alt="Slide 2">
            </div>
            <div class="slide w-full h-full shrink-0 basis-full bg-[#ccc] ">
              <img class="w-full" src="https://loremflickr.com/500/210?lock=4"
                srcset="https://loremflickr.com/500/210?lock=4 500w, https://loremflickr.com/900/378?lock=4 900w, https://loremflickr.com/1920/800?lock=4 1920w"
                sizes="(max-width: 500px) 100vw, (max-width: 900px) 100vw, 100vw" alt="Slide 3">
            </div>
          </div>
          <div class="indicator-ele flex absolute left-[55%] top-[90%] translate-x-[-100%]">
            <span class="active my-[2px] mx-[5px] p-[3px] w-[15px] h-[15px] rounded-[15px] bg-[#fff] "></span>
            <span class=" my-[2px] mx-[5px] p-[3px] w-[15px] h-[15px]  rounded-[15px] bg-[#fff]"></span>
            <span class=" my-[2px] mx-[5px] p-[3px] w-[15px] h-[15px]  rounded-[15px] bg-[#fff]"></span>
          </div>
        </div>
        <!-- 服务范围 -->
        <div class=" flex  grid grid-cols-1 overflow-hidden justify-between  max-w-[960px] mx-auto  lg:grid-cols-2">
          <div class="animate-slide-left  mt-[57px]  md:pl-[86px]  ">
            <div
              class="text-[24px] ml-[47px] mb-[12px] font-medium whitespace-nowrap text-[#000] md:mx-[27px] md:mb-[14px]">
              服务范围
            </div>
            <p class=" top-11 mx-[27px] text-[14px] leading-[22px] text-[#8B8B8B]  md:text-[12px]">
              依托百度政务混合云，汇聚城市管理及公安等政务领域的自有数据及互联网公开数据，基于百度大数据多年积累的行业模型及实战经验，提供从数据整合治理到分析挖掘的一站式大数据解决方案，助力智慧政务新时代。<br><br>

              全渠道零售方案包括B2C、O2O、B2B的场景，提供APP/小程序，支持对接饿了么、美团等第三方外卖平台，基于阿里巴巴多年沉淀的业务中台技术，建立商品、会员、交易、营销等共享服务中心，实现全渠道数据的共享和一致，帮助零售商打造线上、线下无差别的全渠道销售能力。
            </p>
          </div>
          <div class="animate-slide-right  h-[379px] mt-[16px] md:h-[600px] relative">
            <img src="./img/04.jpg"
              class=" w-[82px] h-[80px] right-[245px]  top-[112px]  md:w-[128px] md:h-[128px] md:top-[172px] md:right-[366px] absolute "
              alt="">
            <img src="./img/05.jpg" class="w-[233px] h-[193px] right-0 top-0 md:w-[350px] md:h-[300px]   absolute "
              alt="">
            <img src="./img/06.jpg"
              class="w-[218px] h-[158px] top-[205px] right-[168px]  md:w-[329px]  md:h-[242px] md:top-[314px] md:right-[246px] absolute "
              alt="">
            <img src="./img/07.jpg"
              class="w-[154px] h-[98px] right-0 top-[205px] md:w-[230px] md:h-[150px] md:top-[314px]  absolute " alt="">
          </div>
        </div>
        <!-- 企业文化 -->
        <div class="parallax-container relative hidden h-[260px] md:block">
          <div class="background-layer absolute top[10px] left-0 w-full h-[260px] bg-cover bg-no-repeat bg-fixed ">

          </div>
          <div class="absolute top-0 left-0 w-full h-full bg-black opacity-70"></div>
          <div class="absolute top-[50px] text-white z-[1] transition-all text-center px-[15%]">
            作为中国专业的企业文化咨询公司，我们在生存和发展的历程中，也形成了自己经营管理个性和文化，我们的运营和发展都基于对这些文化涵盖的信念、信条和原则持之以恒、不折不扣地执行，所有公司的成员的所有行为均需与这些标准和原则保持高度统一。<br><br>
            我们相信，企业的战略可以改变，领导可以更换，甚至文化的表现也要与时俱进，总之一切都可以调整，唯一能保持并引领我们的，只有我们的文化核心。只有信念的坚持才能带来企业的持续增长，只有统一的意志才能锻炼出优秀的队伍，总之只有文化才能使我们长青。
          </div>
        </div>
        <!-- 团队介绍 -->
        <div class="text-center ">
          <div class="text-center content-center text-[24px] pt-[49px] pb-[35px]">团队介绍</div>
          <div class="flex grid grid-cols-1 text-white md:grid-cols-3 ">
            <div class="team-img-box-one overflow-hidden w-full h-[525px] md:max-w-[320px] md:h-[450px]">
              <div class="mt-[376px]  animate-slide-right md:mt-[301px]">
                <div class="text-[38px]">Jon Smith</div>
                <div>特级教师，从事教育工作10年</div>
                <div class="mt-[24px]">More information</div>
              </div>
            </div>
            <div class="team-img-box-two overflow-hidden w-full h-[525px] md:w-[320px] md:h-[450px]">
              <div class="mt-[376px]  animate-slide-right md:mt-[301px]">
                <div class="text-[38px]">Jon Smith</div>
                <div>特级教师，从事教育工作10年</div>
                <div class="mt-[24px]">More information</div>
              </div>
            </div>
            <div class="team-img-box-three overflow-hidden w-full h-[525px] md:w-[320px] md:h-[450px]">
              <div class="mt-[376px]  animate-slide-right md:mt-[301px]">
                <div class="text-[38px]">Jon Smith</div>
                <div>特级教师，从事教育工作10年</div>
                <div class="mt-[24px]">More information</div>
              </div>
            </div>
          </div>
        </div>
        <!-- 新闻动态 -->
        <div class=" bg-[#252429] text-white px-[18px] pb-[27px]">
          <div class="text-center content-center text-[24px] pt-[49px] pb-[35px]">新闻动态</div>
          <div
            class="grid w-full grid-cols-2 overflow-hidden gap-y-[32px] news-list justify-items-center md:grid-cols-4"
            id="tab1-news-list">
          </div>

        </div>
      </div>
      <div id="Tab2" class="hidden w-full min-h-[76vh]  tabContent">
        <div class="new-header text-center content-center text-[24px] pt-[49px] pb-[35px]">
          新闻列表
        </div>
        <div
          class="news-list  grid w-full grid-cols-2 overflow-hidden gap-y-[32px]  min-h-[70vh] justify-items-center md:grid-cols-4"
          id="tab2-news-list">

        </div>
        <div class="flex justify-center relative my-[22px] page-setup-box text-[12px] text-[#8B8B8B]">
          <div class="relative w-[60px]">
            <button id="openPopup" class="relative h-[24px]">
              10条/页</button>
            <div id="popup"
              class="popup hidden absolute bg-white border left-0  bottom-[20px] border-[#000] px-[4px] py-[6px] width-[50px]">
              <ul class="p-0 m-0 list-none  text-[12px]">
                <li class="mb-[5px] p-0 m-0"><span>1条/页</span></li>
                <li class="mb-[5px] p-0 m-0"><span>2条/页</span></li>
                <li class="mb-[5px] p-0 m-0"><span>3条/页</span></li>
                <li class="mb-[5px] p-0 m-0"><span>4条/页</span></li>
                <li class="mb-[5px] p-0 m-0"><span>5条/页</span></li>
                <li class="mb-[5px] p-0 m-0"><span>6条/页</span></li>
                <li class="mb-[5px] p-0 m-0"><span>7条/页</span></li>
                <li class="mb-[5px] p-0 m-0"><span>8条/页</span></li>
                <li class="mb-[5px] p-0 m-0"><span>9条/页</span></li>
                <li class="mb-[5px] p-0 m-0"><span>10条/页</span></li>
                <!-- 添加更多页码 -->
              </ul>
            </div>
          </div>
          <div id="pagination" class="flex justify-items-center"></div>
          <div class="ml-[8px]">
            前往
            <input class="px-[4px] py-[2px] mx-[2px] rounded-sm border border-[#DCDFE6] text-center" type="number"
              id="gotoPageInput" min="1" max="10">

            <button onclick="gotoPage()">跳转</button>
          </div>
        </div>
      </div>
      <div id="Tab3" class="hidden w-full tabContent">
        <div class="new-header text-center content-center text-[24px] pt-[49px] pb-[35px]">
          关于我们
        </div>
        <div class="flex justify-center min-h-[60vh]">
          <div
            class="about-us-box  text-[#353535] gap-x-[33px] w-full grid grid-cols-1 justify-items-center md:grid-cols-2 md:px-[90px] ">
            <div class="w-full h-[230px] text-[12px] md:h-[240px] md:w-[350px]" id="map"></div>
            <div
              class="text-[14px] leading-[24px] px-[18px] py-[27px] md:text-[12px] md:px-0 md:py-0 md:leading-[24px]">
              <p class="text-[18px] md:text-[18px] font-semibold mb-[12px]">一家专注系统高端定制开发的公司</p>
              <p>互联网指的是是网络与网络之间所串连成的庞大网络，这些网络以一组通用的协议相连，形成逻辑上的单一巨大国际网络。
                互联网始于1969年美国的阿帕网。这种将计算机网络互相联接在一起的方法可称作“网络互联”，在这基础上发展出覆盖全世界的全球性互联网络称互联网，即是互相连接一起的网络结构。<br><br>
                我们出色的专业开发团队扎实的技术支持，优质高效的服务意识和丰厚的资源优势，提供专业的网站建设，微信小程序，APP开发，等技术服务。成果，专注于为客户提供专业有效的互联网系统解决方案。
              </p>
              <div class="mt-[12px]">地址：中国山东省青岛市市南区某某中路20号</div>
              <div>邮箱：1370XXX171</div>
              <div>电话：0532-8888888</div>
            </div>
          </div>
        </div>
      </div>
    </main>
    <footer
      class="w-full bg-[#FF350D] text-white pl-[32px] pr-[16px] pt-[16px] pb-[27px] leading-[15px] text-[12px]  md:text-[12px] md:leading-[25px]">
      <div class="flex flex-col w-full md:items-center ">
        <div class=" grid grid-cols-1  mb-[24px] md:grid-cols-3 gap-y-[12px] md:justify-items-center">
          <p>地址：中国山东省青岛市市南区某某中路20号</p>
          <p>邮箱：1370XXX171@qq.com</p>
          <p>电话：0591-88888888</p>
        </div>
        <div class="flex">
          <img src="./img/01.jpg" class="w-[36px] h-[36px] mr-[6px]" alt="">
          <div class="">
            <p>Copyright © 2009 - 2022 Cld,All Rights Reserved 网络科技有限公司 版权所有 陕ICP备xxxxxxx号</p>
          </div>
        </div>
      </div>
    </footer>
    <div id="drawerNav"
      class="drawer-nav px-[27px] py-[22px] fixed top-0 right-[-250px] w-[250px] h-full transition-all bg-[#252429] duration-500 z-[100] md:hidden">
      <div class="flex justify-end w-full">
        <img src="./img/icon/03.jpg" class="w-[19px] h-[19px]" id="closeNavBtn" />
      </div>
      <div class="text-sm py-[50px] text-white text-[16px]  border-b-2 border-[#333]   "
        onclick="openTab(event, 'Tab1', 0)">
        <span class="tab active">首页</span>
      </div>
      <div class="text-sm py-[50px] text-white text-[16px]  border-b-2 border-[#333]   "
        onclick="openTab(event, 'Tab2', 1)">
        <span class="tab">新闻列表页</span>
      </div>
      <div class="text-sm py-[50px] text-white text-[16px]  border-b-2 border-[#333]   "
        onclick="openTab(event, 'Tab3', 2)">
        <span class="tab">关于我们</span>
      </div>
    </div>
  </div>

  <!--引用百度地图API-->
  <script type="text/javascript" src="http://api.map.baidu.com/getscript?v=2.0&ak=U7J2Ed8K6PnbE3bjOadhbMKxjRcjuJB7">
  </script>
  <script type="text/javascript" src="./fetch.js">
  </script>
  <script>
    //声明元素变量方便使用
    let carouselListEle
    let arrowLeftEle
    let arrowRightEle
    let indicatorEle
    let slideLeftElements
    let slideRightElements

    //新闻列表页渲染逻辑
    const tab1NewsList = document.getElementById('tab1-news-list')
    const tab2NewsList = document.getElementById('tab2-news-list')
    const pagination = document.getElementById('pagination')
    const gotoPageInput = document.getElementById('gotoPageInput')
    //获取静态页面元素
    function getEle () {
      carouselListEle = document.querySelector('.slides'),
        arrowLeftEle = document.querySelector('.carousel-arrow-left'),
        arrowRightEle = document.querySelector('.carousel-arrow-right'),
        indicatorEle = document.querySelectorAll('.indicator-ele span')
      slideLeftElements = document.querySelectorAll('.animate-slide-left')
      slideRightElements = document.querySelectorAll('.animate-slide-right')
    }
    window.addEventListener('load', function () {
      // 执行一次鼠标滚动事件的回调函数
      getEle()
      // showSlides();
      slideshowStart()
      listenMouseHover()
      //3. 监听滚动事件 做左右滚动动画
      scrollCallback();
    });
    const openPopupBtn = document.getElementById('openPopup')
    const popup = document.getElementById('popup')
    //选择分页
    openPopupBtn.addEventListener('click', function () {
      popup.style.display = 'block'
    })

    //1. tab切换
    document.addEventListener('DOMContentLoaded', function () {
      // 默认打开第一个tab

      currentBlockTab = localStorage.getItem('currentBlockTab') || 'Tab1';
      document.getElementById(currentBlockTab).style.display = 'block'
    })

    function openTab (evt, tabName, index) {

      var i, tabContent

      // 隐藏所有tab内容
      tabContent = document.getElementsByClassName('tabContent')
      for (i = 0; i < tabContent.length; i++) {
        tabContent[i].style.display = 'none'
      }

      // 移除所有按钮的激活状态
      let tabs = document.querySelectorAll('.tab');
      // 移除所有选项卡的激活样式
      tabs.forEach(tab => {
        tab.classList.remove('active');
      });
      tabs[index].classList.add('active');
      // 显示当前tab内容，并激活按钮
      document.getElementById(tabName).style.display = 'block'
      localStorage.setItem('currentBlockTab', tabName);
      //关闭侧边栏
      closeRightNavBtn()

      // evt.currentTarget.className += ' active'
    }
    //侧边导航栏

    const openNavBtn = document.getElementById('openNavBtn')
    openNavBtn.addEventListener('click', openRightNavBtn)
    closeNavBtn.addEventListener('click', closeRightNavBtn)
    function closeRightNavBtn () {
      drawerNav.style.right = '-250px' // 将抽屉导航隐藏在右侧
    }
    function openRightNavBtn () {
      drawerNav.style.right = '0' // 将抽屉导航向右滑出
    }
    //2. 轮播图
    let slideIndex = 0;
    let currentIndex = 0;
    let slides = document.querySelectorAll('.slide');


    let progressInterval;
    function moveTo (index) {
      carouselListEle.style.transform = `translateX(-${index * 100}%)`
      carouselListEle.style.transition = '.5s'

      // 去掉导航点选中效果
      let active = document.querySelector('.indicator-ele span.active')
      active.classList.remove('active')
      // 添加选中效果
      indicatorEle[index].classList.add('active')
      currentIndex = index
    }


    function indicatorBindClick () {
      indicatorEle.forEach((item, i) => {
        item.onclick = function () {
          moveTo(i);
        }
      })
    }
    function cloneSlideDom () {
      let lastImg = carouselListEle.lastElementChild.cloneNode(true)
      let firstImg = carouselListEle.firstElementChild.cloneNode(true)
      carouselListEle.appendChild(firstImg)
      carouselListEle.insertBefore(lastImg, carouselListEle.firstElementChild)
      lastImg.style.position = 'absolute'
      lastImg.style.transform = 'translateX(-100%)'

    }
    function slideshowStart (time = 5000) {
      cloneSlideDom()
      indicatorBindClick()
      progressInterval = setInterval(() => {
        nextSlide()
      }, time)
    }

    //自动去下一个轮播
    function nextSlide () {
      if (currentIndex === indicatorEle.length - 1) {
        carouselListEle.style.transition = 'none'
        carouselListEle.style.transform = 'translateX(100%)'
        carouselListEle.clientHeight
        moveTo(0)
      } else {
        moveTo(currentIndex + 1)
      }
    }

    function startAutoPlay () {
      progressInterval = setInterval(() => {
        // progressBar.style.width = '0';
        nextSlide()
      }, 5000);
    }

    function stopAutoPlay () {
      clearInterval(progressInterval);
    }



    // 鼠标悬停和离开事件
    function listenMouseHover () {
      document.querySelector('.slideshow-container').addEventListener('mouseenter', stopAutoPlay); // <-- 差异：鼠标进入时停止自动播放
      document.querySelector('.slideshow-container').addEventListener('mouseleave', startAutoPlay); // <-- 差异：鼠标离开时重新开始自动播放

    }
    //4. 图片文字从两边切入动作
    // 获取要滑入的元素

    window.addEventListener('scroll', scrollCallback)
    //鼠标滚动的回调
    function scrollCallback () {
      // 遍历每个要滑入的元素
      if (slideLeftElements) {
        slideLeftElements.forEach(element => {
          // 判断元素是否在可视范围内
          if (isElementInViewport(element)) {
            // 添加滑入的 CSS 类
            element.classList.add('slide-left-in')
          }
        })
        slideRightElements.forEach(element => {
          // 判断元素是否在可视范围内
          if (isElementInViewport(element)) {
            // 添加滑入的 CSS 类
            element.classList.add('slide-right-in')
          }
        })
      }

    }
    // 判断元素是否在可视范围内的函数
    function isElementInViewport (el) {
      const rect = el.getBoundingClientRect()
      return rect.top <= 850
    }

    // 模拟新闻数据
    const newsData = [
      { id: 1, title: '2022百度AI大会前夕，解读百度大脑的半年“豹变”', content: 'Facebook为未来的VR社交打造了一款逼真的虚拟头像系统，该系统的特点是，利用数百颗摄像头对人脸进行动作捕捉，并能生成与人脸相似度很高的虚拟头像，这些头像还能模仿人脸的大量表情。' },
      { id: 2, title: '2022百度AI大会前夕，解读百度大脑的半年“豹变”', content: 'Facebook为未来的VR社交打造了一款逼真的虚拟头像系统，该系统的特点是，利用数百颗摄像头对人脸进行动作捕捉，并能生成与人脸相似度很高的虚拟头像，这些头像还能模仿人脸的大量表情。' },
      { id: 3, title: '2022百度AI大会前夕，解读百度大脑的半年“豹变”', content: 'Facebook为未来的VR社交打造了一款逼真的虚拟头像系统，该系统的特点是，利用数百颗摄像头对人脸进行动作捕捉，并能生成与人脸相似度很高的虚拟头像，这些头像还能模仿人脸的大量表情。' },
      { id: 4, title: '2022百度AI大会前夕，解读百度大脑的半年“豹变”', content: 'Facebook为未来的VR社交打造了一款逼真的虚拟头像系统，该系统的特点是，利用数百颗摄像头对人脸进行动作捕捉，并能生成与人脸相似度很高的虚拟头像，这些头像还能模仿人脸的大量表情。' },
    ]


    //渲染主页新闻
    async function renderHomeNews () {
      let data = await myFetch(`newList?pageNumber=${1}&pageSize=${4}`)
      let news = data.data.list
      let html = ''
      news.forEach(item => {
        html += `
          <a href="newDetail.html?id=${item.id}">
            <div class="w-[167px]" >
              <img
                class="h-[259px]  w-[167px] transition-transform duration-500  md:hover:scale-[1.05] md:w-[174px] md:h-[253px] "
                src="https://loremflickr.com/320/240?random=${item.id}.jpg" alt="">
              <div class="animate-slide-right mt-[16px] md:mt-[18px]">
                <div class="text-[15px] font-semibold md:text-[14px] text-center">
                  <p>${item.title}</p>
                </div>
                <div class=" text-[14px] leading-[24px] mt-[16px] md:text-[12px] md:leading-[14px] md:mt-[14px]">
                  <p>${item.content}</p>
                </div>
              </div>
            </div>
            </a>
          `

      })

      tab1NewsList.innerHTML = html
      slideRightElements = document.querySelectorAll('.animate-slide-right')
    }
    renderHomeNews()



    //创建和初始化地图函数：
    function initMap () {
      createMap();//创建地图
      setMapEvent();//设置地图事件
      addMapControl();//向地图添加控件
      addMapOverlay();//向地图添加覆盖物
    }
    function createMap () {
      map = new BMap.Map("map");
      map.centerAndZoom(new BMap.Point(119.248109, 26.058779), 19);
    }
    function setMapEvent () {
      map.enableScrollWheelZoom();
      map.enableKeyboard();
      map.enableDragging();
      map.enableDoubleClickZoom()
    }
    function addClickHandler (target, window) {
      target.addEventListener("click", function () {
        target.openInfoWindow(window);
      });
    }
    function addMapOverlay () {
      var markers = [
        { content: "", title: "特力林科技大厦301", imageOffset: { width: 0, height: 3 }, position: { lat: 26.05898, lng: 119.247822 } }
      ];
      for (var index = 0; index < markers.length; index++) {
        var point = new BMap.Point(markers[index].position.lng, markers[index].position.lat);
        var marker = new BMap.Marker(point, {
          icon: new BMap.Icon("http://api.map.baidu.com/lbsapi/createmap/images/icon.png", new BMap.Size(20, 25), {
            imageOffset: new BMap.Size(markers[index].imageOffset.width, markers[index].imageOffset.height)
          })
        });
        var label = new BMap.Label(markers[index].title, { offset: new BMap.Size(25, 5) });
        var opts = {
          width: 200,
          title: markers[index].title,
          enableMessage: false
        };
        var infoWindow = new BMap.InfoWindow(markers[index].content, opts);
        marker.setLabel(label);
        addClickHandler(marker, infoWindow);
        map.addOverlay(marker);
      };
    }
    //向地图添加控件
    function addMapControl () {
      var scaleControl = new BMap.ScaleControl({ anchor: BMAP_ANCHOR_BOTTOM_LEFT });
      scaleControl.setUnit(BMAP_UNIT_IMPERIAL);
      map.addControl(scaleControl);
      var navControl = new BMap.NavigationControl({ anchor: BMAP_ANCHOR_TOP_LEFT, type: 3 });
      map.addControl(navControl);
      var overviewControl = new BMap.OverviewMapControl({ anchor: BMAP_ANCHOR_BOTTOM_RIGHT, isOpen: false });
      map.addControl(overviewControl);
    }
    var map;
    initMap();

  </script>
  <script>
    //dom节点加载完成后的操作
    document.addEventListener('DOMContentLoaded', function () {
      // 在 DOM 渲染完成后执行的操作
    });
    // 每页显示的新闻数量
    let pageSize = 10
    let total = 0
    let totalPage = 0
    // 当前页码
    let currentPage = 1
    let newsListData = []
    // 初始化
    // 渲染新闻详情页列表
    async function renderNewsList () {
      currentPage = parseInt(localStorage.getItem('currentPageNumber')) || 1;
      pageSize = parseInt(localStorage.getItem('currentPageSize')) || 10;
      openPopupBtn.textContent = `${pageSize}条/页`
      const startIndex = (currentPage - 1) * pageSize
      const endIndex = startIndex + pageSize
      let data = await myFetch(`newList?pageNumber=${currentPage}&pageSize=${pageSize}`)
      const news = data.data.list
      total = data.data.total
      totalPage = Math.ceil(total / pageSize)

      let html = ''
      news.forEach(item => {
        html +=
          `
          <a href="newDetail.html?id=${item.id}">
            <div class="w-[167px]" >
              <div class="relative new-image-container h-[259px]  w-[167px]">
                <img
                class="small-image h-[259px]  w-[167px] absolute top-0 left-0 object-cover blur-md md:w-[174px] md:h-[253px] "
                src="https://loremflickr.com/16/26?lock=${+item.id}" alt="">
                <img
                class="large-image h-[259px]  w-[167px] transition-transform duration-500 hidden  md:hover:scale-[1.05] md:w-[174px] md:h-[253px] "
                src="https://loremflickr.com/167/259?lock=${+item.id}" alt="">
              </div>
              <div class="animate-slide-right mt-[16px] md:mt-[18px]">
                <div class="text-[15px] font-semibold md:text-[14px]">
                  <p>${item.title}</p>
                </div>
                <div class=" text-[14px] leading-[24px] mt-[16px] md:text-[12px] md:leading-[14px] md:mt-[14px]">
                  <p>${item.content}</p>
                </div>
              </div>
            </div>
          </a>
          `
      })

      tab2NewsList.innerHTML = html
      slideRightElements = document.querySelectorAll('.animate-slide-right')
      //渲染完新闻列表再渲染按钮
      renderPagination()
      groundGlass()
    }
    function groundGlass () {
      var containers = document.querySelectorAll('.new-image-container');
      var loadedCount = 0; // 记录加载完成的大图数量

      containers.forEach(function (container) {
        var smallImage = container.querySelector('.small-image');
        var largeImage = container.querySelector('.large-image');

        // 监听大图加载完成事件
        largeImage.onload = function () {
          // 隐藏小图
          smallImage.style.display = 'none';
          // 显示大图
          largeImage.style.display = 'block';

          // 检查是否所有大图都加载完成
          loadedCount++;
          if (loadedCount === containers.length) {
            // 在这里执行其他操作
          }
        };
      });
    };
    renderNewsList(currentPage)
    // 跳转到指定页码
    function goToPage (page) {
      currentPage = page
      localStorage.setItem('currentPageNumber', currentPage);
      renderNewsList(currentPage)
      setTimeout(() => {
        scrollCallback();
      }, 400)
    }
    // 前往指定页码
    function gotoPage () {
      const page = parseInt(gotoPageInput.value)
      if (page >= 1 && page <= totalPage) {
        goToPage(page)
        setTimeout(() => {
          scrollCallback();
        }, 400)
      } else {
        alert('请输入有效的页码！')
      }
    }

    // 渲染分页按钮
    function renderPagination () {

      let html = ''
      // 上一页按钮
      if (currentPage > 1) {
        html += `<button class="px-[6px] py-[4]" onclick="goToPage(${currentPage - 1})"><</button>`
      }

      // 显示前5个页码
      for (let i = Math.max(1, currentPage); i <= Math.min(totalPage, currentPage + 3); i++) {
        if (i === currentPage) {
          html += `<button class="selected px-[8px] py-[4]" onclick="goToPage(${i})">${i}</button>`
        } else {
          html += `<button class="px-[8px] py-[4]" onclick="goToPage(${i})">${i}</button>`
        }
      }
      // 最后一页的页码
      if (totalPage > 5 && currentPage < totalPage - 2) {
        html += `<span class="px-[8px] py-[4]">...</span>`
        html += `<button onclick="goToPage(${totalPage})">${totalPage}</button>`
      }
      // 下一页按钮
      if (currentPage < totalPage) {
        html += `<button class="px-[6px] py-[4]" onclick="goToPage(${currentPage + 1})">></button>`
      }

      pagination.innerHTML = html
    }


    document.addEventListener('click', function (event) {
      // 如果点击了弹出框外部区域或者按钮外部区域
      if (!event.target.closest('#popup') && event.target !== openPopupBtn) {
        popup.style.display = 'none'
      }

      // 如果点击了页码链接
      if (event.target.tagName === 'SPAN') {
        // 获取页码链接文本内容
        const pageNumberText = event.target.textContent.trim()
        // 从文本内容中提取数字部分
        const pageIndex = pageNumberText.match(/\d+/)
        // 将提取出的数字填入按钮内
        pageSize = pageIndex
        totalPage = Math.ceil(total / pageSize)
        localStorage.setItem('currentPageSize', pageSize);
        renderNewsList()

        openPopupBtn.textContent = pageNumberText
        // 隐藏弹出框
        popup.style.display = 'none'
      }
    })

  </script>
</body>

</html>